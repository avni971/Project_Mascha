{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yuval\\\\Documents\\\\GitHub\\\\Project_Mascha\\\\moshe\\\\src\\\\components\\\\Form.js\";\nimport { db } from '../firebase/firebase';\nimport React from 'react';\nimport { Card } from 'react-bootstrap';\nimport \"firebase/firestore\"; // import { ThemeConsumer } from 'react-bootstrap/esm/ThemeProvider';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FormHook extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  } //__________________________________________COMMPONENT DID MOUNT______________________________________________\n\n\n  async componentDidMount() {\n    let secs1 = [];\n    let secs2 = [];\n    let secs3 = [];\n\n    try {\n      let forms = await db.collection(\"Forms\").get();\n      let i;\n      let indexarray = [];\n      forms.docs.forEach((form, index) => {\n        i = parseInt(form.id);\n        indexarray.push(i); //     if(form.data().zone===1)\n        //     {\n        //      secs1.push(form.data())\n        //     }\n        //    if(form.data().zone===2)\n        //    {\n        //     secs2.push(form.data())\n        //    }\n        //    if(form.data().zone===3)\n        //    {\n        //     secs3.push(form.data())\n        //    }\n      });\n      indexarray.sort((a, b) => a - b);\n\n      for (let j = 0; j < indexarray.length; j++) {\n        let k = j.toString();\n        var docRef = db.collection(\"Forms\").doc(k);\n        docRef.get().then(doc => {\n          if (doc.exists) {\n            switch (doc.data().zone) {\n              case 1:\n                secs1.push(doc.data());\n                break;\n\n              case 2:\n                secs2.push(doc.data());\n                break;\n\n              case 3:\n                secs3.push(doc.data());\n                break;\n\n              default:\n                break;\n            }\n          }\n        });\n      }\n\n      this.setState({\n        secs1: secs1,\n        secs2: secs2,\n        secs3: secs3\n      });\n      console.log(this.state);\n    } catch (error) {\n      alert(error);\n    }\n  } //__________________________________________END OF COMPONENT MOUNT_________________________________________\n  //__________________________________________FUNCTIONS_______________________________________________________\n  //WRITE DATA put the data we get from the add question card and update our firestore db\n\n\n  handleSubmit() {\n    console.log(this.state);\n    console.log('in'); // console.log(e);\n    // e.preventDefault(); // Prevents default refresh by the browser\n    // emailjs.sendForm(`gmail`, apiKey.TEMPLATE_ID, e.target, apiKey.USER_ID)\n    // .then((result) => {\n    // alert(\"Message Sent, We will get back to you shortly\", result.text);\n    // },\n    // (error) => {\n    // alert(\"An error occurred, Please try again\", error.text);\n    // });\n  }\n\n  writeData(question, num, zone) {\n    let arrString = \"\";\n    let megaString = \"\";\n\n    for (let i = 0; i < this.numGlo - 1; i++) {\n      arrString = \"quest\" + i;\n      megaString += document.getElementById(arrString).value + \"$$\";\n    }\n\n    arrString = \"quest\" + (this.numGlo - 1);\n    megaString += document.getElementById(arrString).value;\n    let yuvalquestionnum;\n    db.collection('questionsnum').get().then(ans => {\n      ans.forEach(element => {\n        if (element.exists) {\n          yuvalquestionnum = element.data().yuvalquestionnum; //console.log(yuvalquestionnum);\n\n          let d = yuvalquestionnum.toString(); //update the forms\n\n          let docnum = parseInt(d);\n          db.collection(\"Forms\").doc(d).update({\n            quest: question,\n            numQuest: Number(num),\n            answers: megaString,\n            answersstats: [0, 0, 0, 0, 0],\n            questionNumber: Number(docnum)\n          }); //add +1 to question num\n\n          db.collection(\"questionsnum\").doc(\"questionsnum\").update({\n            yuvalquestionnum: yuvalquestionnum + 1\n          });\n        }\n      });\n    });\n    document.getElementById(\"plusQ\").innerHTML = \"\";\n    document.getElementById(\"numQuest\").value = \"\";\n    document.getElementById(\"add\").value = \"\";\n    alert(\"נוספה שאלה !\");\n  } //SUPP DATA removes a question from our firestore db  \n\n\n  suppData(question, num) {\n    //console.log(question)\n    // //console.log(num)\n    db.collection('Forms').get().then(ans => {\n      ans.forEach(element => {\n        if (element.exists) {\n          if (element.data().quest === question && element.data().numQuest === num) db.collection('Forms').doc(element.id).delete();\n        }\n      });\n    });\n    document.getElementById(\"plusQ\").innerHTML = \"\";\n    document.getElementById(\"numQuest\").value = \"\";\n    document.getElementById(\"add\").value = \"\";\n    alert(\"שאלה נמחקה !\");\n  } //QUESTION NUM is a helper funtion to get a name (quest-i) that only exist for our current question\n\n\n  questionNum(num) {\n    let formC;\n    let clasString;\n    document.getElementById('plusQ').innerHTML = \"\";\n    this.numGlo = num;\n    this.yuvalquestionnum++;\n\n    for (let i = 0; i < num; i++) {\n      formC = document.createElement(\"input\");\n      clasString = \"quest\" + i;\n      formC.setAttribute(\"id\", clasString);\n      document.getElementById(\"plusQ\").appendChild(formC);\n    }\n  }\n\n  test1() {\n    console.log('in');\n  } //SUBMIT FORM CLICKED is called when the submit button was clicked.\n  //it updates the firestore so the stat page will be ready for next read\n\n\n  submitformclicked() {\n    // adding +1 to the answer given by the form\n    db.collection('Forms').get().then(ans => {\n      ans.forEach(element => {\n        if (element.exists) {\n          //put in number the current question\n          let currentquestion = element.id.toString(); // console.log(currentquestion);\n          // console.log(element.data().quest);\n          //split the answers\n\n          let answeroptions;\n\n          if (element.data().answers) {\n            answeroptions = element.data().answers.split(\"$$\");\n          } // console.log(answeroptions);                \n          //get the stats already in firestore\n\n\n          let x0, x1, x2, x3, x4; // console.log(element.data().answersstats);\n\n          if (element.data().answersstats) {\n            x0 = parseInt(element.data().answersstats[0]);\n            x1 = parseInt(element.data().answersstats[1]);\n            x2 = parseInt(element.data().answersstats[2]);\n            x3 = parseInt(element.data().answersstats[3]);\n            x4 = parseInt(element.data().answersstats[4]);\n          } // console.log(x0,x1,x2,x3,x4);\n          //find the picked answer from the form\n\n\n          for (let answer in answeroptions) {\n            // console.log(answer);   \n            // console.log(answeroptions[answer]);\n            var k = document.getElementById(answeroptions[answer]);\n\n            if (k && k.checked) {\n              console.log(k);\n              let place = parseInt(k.value) - 1;\n              console.log(place); //change the correct stat\n              //     if(place===0)\n              //     {\n              //         db.collection(\"Forms\").doc(currentquestion).update({\n              //         answersstats:[Number(x0+1),Number(x1),Number(x2),Number(x3),Number(x4)],\n              //     },{ merge: true });}\n              //     if(place===1)\n              //    { db.collection(\"Forms\").doc(currentquestion).update({\n              //         answersstats:[Number(x0),Number(x1+1),Number(x2),Number(x3),Number(x4)],\n              //     },{ merge: true });}\n              //     if(place===2)\n              //     {db.collection(\"Forms\").doc(currentquestion).update({\n              //         answersstats:[Number(x0),Number(x1),Number(x2+1),Number(x3),Number(x4)],\n              //     },{ merge: true });}\n              //     if(place===3)\n              //    { db.collection(\"Forms\").doc(currentquestion).update({\n              //         answersstats:[Number(x0),Number(x1),Number(x2),Number(x3+1),Number(x4)],\n              //     },{ merge: true });}\n              //     if(place===4)\n              //    { db.collection(\"Forms\").doc(currentquestion).update({\n              //         answersstats:[Number(x0),Number(x1),Number(x2),Number(x3),Number(x4+1)],\n              //     },{ merge: true });}\n              // //to make sure we dont go over same answer twcie\n              // k.checked=false;\n              // console.log(element.data());\n            }\n          } //put it back in firestore\n\n        }\n      });\n    });\n  }\n\n  createData(q, a, num, i) {\n    var data = {\n      quest: q,\n      answers: a,\n      numQuest: num,\n      answerstats: [0, 0, 0, 0, 0]\n    }; // quest = \"\"\n    // answers=\"abc$$efg\"\n    // numQuest = 5 //number of question\n    //answerstats=[0,0,0,0,0]\n    //questionNumber=parseint(id)\n    // element.id\n\n    this.createDocElement(data, i);\n  }\n\n  createDocElement(data, id) {\n    let textarray = Array(100);\n    let test = data;\n    let tr = document.createElement('tr');\n    let tdQuest = document.createElement('td');\n    tdQuest.classList.add(\"pQ\");\n    tdQuest.id = parseInt(id);\n    tdQuest.textContent = test.quest;\n    tr.appendChild(tdQuest); // console.log(tdQuest);\n\n    let tdAns = document.createElement(\"td\");\n    let arrAns;\n\n    if (test.answers) {\n      arrAns = test.answers.split(\"$$\");\n    }\n\n    for (let i = 0; i < test.numQuest; i++) {\n      var x = document.createElement(\"INPUT\");\n      x.setAttribute(\"type\", \"radio\");\n      x.setAttribute(\"onChange\", \"{this.test1()}\");\n      x.setAttribute(\"id\", arrAns[i]);\n      x.setAttribute(\"name\", test.quest); //x.setAttribute(\"name\",\"question number:\"+test.numQuest)\n\n      x.setAttribute(\"value\", i + 1);\n      var y = document.createElement(\"LABEL\");\n      var t = document.createTextNode(arrAns[i]);\n      y.setAttribute(\"htmlFor\", arrAns[i]);\n      y.appendChild(t);\n      tdAns.appendChild(x);\n      tdAns.appendChild(y);\n    }\n\n    tr.appendChild(tdAns);\n    textarray[parseInt(tdQuest.id)] = tr;\n  } //____________________render happens after commponent did mount in order to load the page_____________________    \n\n\n  render() {\n    //_____________________________the following code gets the questions from the db,\n    //_____________________________builds an html tr for that question,\n    //_____________________________check based on the secs where that question needs to go in the page and sends \n    let textarray = Array(100);\n    db.collection('Forms').get().then(ans => {\n      ans.forEach(element => {\n        if (element.exists) {\n          this.createDocElement(element.data(), element.id); // let test = element.data()\n          // let tr = document.createElement('tr')\n          // let tdQuest = document.createElement('td')\n          // tdQuest.classList.add(\"pQ\");\n          // tdQuest.id=parseInt(element.id);\n          // tdQuest.textContent = test.quest\n          // tr.appendChild(tdQuest)\n          // // console.log(tdQuest);\n          // let tdAns = document.createElement(\"td\")\n          // let arrAns\n          // if(test.answers){\n          // arrAns = test.answers.split(\"$$\");\n          // }\n          // for(let i = 0; i<test.numQuest ; i++){\n          //     var x = document.createElement(\"INPUT\");\n          //     x.setAttribute(\"type\", \"radio\");\n          //     x.setAttribute(\"onChange\",\"{this.test1()}\");\n          //     x.setAttribute(\"id\", arrAns[i])\n          //     x.setAttribute(\"name\",test.quest)\n          //     //x.setAttribute(\"name\",\"question number:\"+test.numQuest)\n          //     x.setAttribute(\"value\",i+1)\n          //     var y = document.createElement(\"LABEL\");\n          //     var t = document.createTextNode(arrAns[i]);\n          //     y.setAttribute(\"htmlFor\", arrAns[i]);\n          //     y.appendChild(t);\n          //     tdAns.appendChild(x)\n          //     tdAns.appendChild(y)\n          // }\n          // tr.appendChild(tdAns) \n          // textarray[parseInt(tdQuest.id)]=tr;\n        }\n      });\n\n      if (this.state.secs1 && this.state.secs2 && this.state.secs3) {\n        // console.log(this.state.secs1.length);\n        for (let i = this.state.secs1.length; i > 0; i--) {\n          document.getElementById(\"שייכות\").after(textarray[i]);\n        } // console.log(this.state.secs2.length+this.state.secs1.length);\n\n\n        for (let j = this.state.secs2.length + this.state.secs1.length; j > this.state.secs1.length; j--) {\n          document.getElementById(\"יאוש\").after(textarray[j]);\n        } // console.log(this.state.secs3.length+this.state.secs2.length+this.state.secs1.length);\n\n\n        for (let m = this.state.secs3.length + this.state.secs2.length + this.state.secs1.length; m > this.state.secs2.length + this.state.secs1.length; m--) {\n          document.getElementById(\"בדידות\").after(textarray[m]);\n        }\n      }\n    }); //______________________________this codes get the users from firestore db and creates an email to send to admins\n    // db.collection('users').get().then((ans) => {\n    //     ans.forEach(element => {\n    //         if(element){\n    //             let subjectslist=\"mailto:\";\n    //             if(element.data())\n    //             {\n    //                 // console.log(element.data());\n    //                 // console.log(element.data().admins);\n    //                 element.data().admins.forEach(e=>{\n    //                 subjectslist+=e;\n    //                 subjectslist+=\";\"\n    //                 })\n    //                 subjectslist+=\"?subject=מענה לשאלות משה\"\n    //             document.getElementById(\"main_form\").action=subjectslist;\n    //             }\n    //         }\n    //     });\n    // }\n    // );\n    //______________this page is loaded after header and it hiererchy is this header,form[tables],footer[admin zone],about\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"F1\",\n      dir: \"rtl\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          \"padding\": \"1.5%\",\n          \"borderColor\": \"#66CDAA\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            \"textAlign\": \"center\"\n          },\n          children: \"\\u05E9\\u05D0\\u05DC\\u05D5\\u05DF \\u05DE\\u05E9\\\"\\u05D4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            \"textAlign\": \"center\"\n          },\n          children: \"\\u05D1\\u05DE\\u05E7\\u05E8\\u05D9\\u05DD \\u05D1\\u05D4\\u05DD \\u05D9\\u05E9 \\u05E1\\u05E7\\u05D0\\u05DC\\u05D4: 1-5, \\u05DB\\u05D0\\u05E9\\u05E8 1 \\u05DE\\u05D9\\u05D9\\u05E6\\u05D2 \\u05DE\\u05E6\\u05D1 \\u05D8\\u05D5\\u05D1 \\u05D5-5 \\u05DE\\u05D9\\u05D9\\u05E6\\u05D2 \\u05DE\\u05E6\\u05D1 \\u05D2\\u05E8\\u05D5\\u05E2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          id: \"addQuestion\",\n          children: [/*#__PURE__*/_jsxDEV(\"tbody\", {\n            id: \"\\u05E9\\u05D9\\u05D9\\u05DB\\u05D5\\u05EA\",\n            className: \"pre_titles\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u05E9\\u05D9\\u05D9\\u05DB\\u05D5\\u05EA:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 59\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 55\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            id: \"\\u05D9\\u05D0\\u05D5\\u05E9\",\n            className: \"pre_titles\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u05D9\\u05D0\\u05D5\\u05E9/\\u05EA\\u05E7\\u05D5\\u05D5\\u05D4:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 56\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 52\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            id: \"\\u05D1\\u05D3\\u05D9\\u05D3\\u05D5\\u05EA\",\n            className: \"pre_titles\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u05D1\\u05D3\\u05D9\\u05D3\\u05D5\\u05EA/\\u05E0\\u05D9\\u05DB\\u05D5\\u05E8:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 58\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 54\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => {\n            this.handleSubmit();\n          },\n          style: {\n            \"marginRight\": \"45%\"\n          },\n          children: \"\\u05E9\\u05DC\\u05D7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nFormHook.numGlo = 0;\nexport default FormHook;","map":{"version":3,"sources":["C:/Users/Yuval/Documents/GitHub/Project_Mascha/moshe/src/components/Form.js"],"names":["db","React","Card","FormHook","Component","constructor","props","state","componentDidMount","secs1","secs2","secs3","forms","collection","get","i","indexarray","docs","forEach","form","index","parseInt","id","push","sort","a","b","j","length","k","toString","docRef","doc","then","exists","data","zone","setState","console","log","error","alert","handleSubmit","writeData","question","num","arrString","megaString","numGlo","document","getElementById","value","yuvalquestionnum","ans","element","d","docnum","update","quest","numQuest","Number","answers","answersstats","questionNumber","innerHTML","suppData","delete","questionNum","formC","clasString","createElement","setAttribute","appendChild","test1","submitformclicked","currentquestion","answeroptions","split","x0","x1","x2","x3","x4","answer","checked","place","createData","q","answerstats","createDocElement","textarray","Array","test","tr","tdQuest","classList","add","textContent","tdAns","arrAns","x","y","t","createTextNode","render","after","m"],"mappings":"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","sourcesContent":["import {db} from '../firebase/firebase'\r\nimport React from 'react'\r\nimport {Card} from 'react-bootstrap'\r\nimport \"firebase/firestore\";\r\n// import { ThemeConsumer } from 'react-bootstrap/esm/ThemeProvider';\r\n\r\n\r\n\r\nclass FormHook extends React.Component{\r\n\r\n    static numGlo = 0;\r\n    \r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n                           \r\n        }\r\n       \r\n    }\r\n//__________________________________________COMMPONENT DID MOUNT______________________________________________\r\n    async componentDidMount(){\r\n        let secs1=[]\r\n        let secs2=[]\r\n        let secs3=[]\r\n  \r\n       \r\ntry{\r\n        let forms = await db.collection(\"Forms\").get()\r\n        let i;\r\n        let indexarray=[];\r\n        forms.docs.forEach((form,index) =>{\r\n            i=parseInt(form.id);\r\n            indexarray.push(i);\r\n        //     if(form.data().zone===1)\r\n        //     {\r\n        //      secs1.push(form.data())\r\n        //     }\r\n        \r\n        //    if(form.data().zone===2)\r\n        //    {\r\n        //     secs2.push(form.data())\r\n        //    }\r\n        //    if(form.data().zone===3)\r\n        //    {\r\n        //     secs3.push(form.data())\r\n        //    }\r\n        })\r\n        indexarray.sort((a,b)=>a-b);\r\nfor(let j=0;j<indexarray.length;j++)\r\n{   let k=j.toString()\r\n \r\n    var docRef = db.collection(\"Forms\").doc(k);\r\n\r\ndocRef.get().then((doc) => {\r\n    if (doc.exists) {\r\n        switch(doc.data().zone){\r\n            case 1:\r\n             secs1.push(doc.data()); break;\r\n             case 2:\r\n                 secs2.push(doc.data()); break;\r\n                 case 3:\r\n                     secs3.push(doc.data()); break;\r\n                     default:break;\r\n         }\r\n}\r\n});\r\n    \r\n   \r\n}\r\n\r\nthis.setState({secs1:secs1,secs2:secs2,secs3:secs3})\r\nconsole.log(this.state) \r\n}\r\ncatch(error){\r\n    alert(error);\r\n}\r\n    }\r\n//__________________________________________END OF COMPONENT MOUNT_________________________________________\r\n\r\n\r\n\r\n    \r\n//__________________________________________FUNCTIONS_______________________________________________________\r\n\r\n//WRITE DATA put the data we get from the add question card and update our firestore db\r\n   \r\nhandleSubmit () {\r\n    console.log(this.state)\r\n    console.log('in');\r\n    // console.log(e);\r\n    // e.preventDefault(); // Prevents default refresh by the browser\r\n    // emailjs.sendForm(`gmail`, apiKey.TEMPLATE_ID, e.target, apiKey.USER_ID)\r\n    // .then((result) => {\r\n    // alert(\"Message Sent, We will get back to you shortly\", result.text);\r\n    // },\r\n    // (error) => {\r\n    // alert(\"An error occurred, Please try again\", error.text);\r\n    // });\r\n    };\r\n\r\n\r\nwriteData(question,num,zone) {\r\n        let arrString = \"\";\r\n        let megaString = \"\";\r\n        for(let i = 0; i < this.numGlo-1 ; i++){\r\n            arrString = \"quest\" + i\r\n            megaString += document.getElementById(arrString).value + \"$$\"\r\n        }\r\n        arrString = \"quest\" + (this.numGlo-1)\r\n        megaString += document.getElementById(arrString).value\r\n     \r\n        let yuvalquestionnum;\r\n        db.collection('questionsnum').get().then((ans) => {\r\n            ans.forEach(element => {\r\n                if(element.exists){\r\n                    yuvalquestionnum=element.data().yuvalquestionnum;\r\n                    //console.log(yuvalquestionnum);\r\n                    let d=yuvalquestionnum.toString();\r\n                    //update the forms\r\n                    let docnum=parseInt(d);\r\n                    db.collection(\"Forms\").doc(d).update(\r\n                        {\r\n                            quest: question,\r\n                            numQuest : Number(num),\r\n                            answers : megaString,\r\n                            answersstats: [0,0,0,0,0],\r\n                            questionNumber:Number(docnum),\r\n                        }\r\n                    )\r\n                    //add +1 to question num\r\n                    db.collection(\"questionsnum\").doc(\"questionsnum\").update(\r\n                        {\r\n                          yuvalquestionnum: yuvalquestionnum+1,\r\n                        }\r\n                    )\r\n            \r\n                }\r\n            });\r\n            });\r\n\r\n        document.getElementById(\"plusQ\").innerHTML = \"\";\r\n        document.getElementById(\"numQuest\").value = \"\";\r\n        document.getElementById(\"add\").value = \"\";\r\n        alert(\"נוספה שאלה !\")\r\n    }\r\n\r\n\r\n  //SUPP DATA removes a question from our firestore db  \r\n    suppData(question,num){\r\n        \r\n        //console.log(question)\r\n        // //console.log(num)\r\n        db.collection('Forms').get().then((ans) => {\r\n            ans.forEach(element => {\r\n                if(element.exists){\r\n                    if(element.data().quest === question && element.data().numQuest === num)\r\n                        db.collection('Forms').doc(element.id).delete();\r\n                }\r\n            })\r\n        })\r\n\r\n        document.getElementById(\"plusQ\").innerHTML = \"\";\r\n        document.getElementById(\"numQuest\").value = \"\";\r\n        document.getElementById(\"add\").value = \"\";\r\n        alert(\"שאלה נמחקה !\")\r\n\r\n    }\r\n//QUESTION NUM is a helper funtion to get a name (quest-i) that only exist for our current question\r\n    questionNum(num){\r\n\r\n        let formC;\r\n        let clasString;\r\n        document.getElementById('plusQ').innerHTML = \"\";\r\n        this.numGlo = num\r\n        this.yuvalquestionnum++;\r\n        for(let i = 0 ; i < num ; i++)\r\n        {\r\n            formC = document.createElement(\"input\");\r\n            clasString = \"quest\" + i;\r\n            formC.setAttribute(\"id\", clasString)\r\n            document.getElementById(\"plusQ\").appendChild(formC)\r\n        }\r\n    }\r\n\r\n    test1()\r\n    {\r\n       console.log('in')\r\n    }\r\n\r\n//SUBMIT FORM CLICKED is called when the submit button was clicked.\r\n//it updates the firestore so the stat page will be ready for next read\r\n    submitformclicked(){\r\n        \r\n\r\n\r\n        // adding +1 to the answer given by the form\r\n        db.collection('Forms').get().then((ans)=>{\r\n            ans.forEach(element=>{\r\n                if(element.exists)\r\n                {\r\n                    //put in number the current question\r\n                    \r\n                    let currentquestion=element.id.toString();\r\n                    // console.log(currentquestion);\r\n                    // console.log(element.data().quest);\r\n                    //split the answers\r\n                    let answeroptions\r\n                    if(element.data().answers)\r\n                    {\r\n                         answeroptions=element.data().answers.split(\"$$\");\r\n                        }\r\n                        // console.log(answeroptions);                \r\n                    //get the stats already in firestore\r\n                    let x0,x1,x2,x3,x4;\r\n                    // console.log(element.data().answersstats);\r\n                    if(element.data().answersstats)\r\n                    {\r\n                        x0=parseInt(element.data().answersstats[0]);\r\n                        \r\n                        x1=parseInt(element.data().answersstats[1]);\r\n                        \r\n                        x2=parseInt(element.data().answersstats[2]);\r\n                        \r\n                        x3=parseInt(element.data().answersstats[3]);\r\n                        \r\n                        x4=parseInt(element.data().answersstats[4]);\r\n                    }\r\n                    // console.log(x0,x1,x2,x3,x4);\r\n                    \r\n                    //find the picked answer from the form\r\n                   for(let answer in answeroptions)\r\n                   {\r\n                    // console.log(answer);   \r\n                    // console.log(answeroptions[answer]);\r\n                    var k=document.getElementById(answeroptions[answer]);\r\n                    \r\n                    if(k && k.checked)\r\n                    {\r\n                         console.log(k);\r\n                        let place=parseInt(k.value)-1;\r\n                        console.log(place);\r\n                    //change the correct stat\r\n                    \r\n                //     if(place===0)\r\n                //     {\r\n                //         db.collection(\"Forms\").doc(currentquestion).update({\r\n                //         answersstats:[Number(x0+1),Number(x1),Number(x2),Number(x3),Number(x4)],\r\n                //     },{ merge: true });}\r\n                //     if(place===1)\r\n                //    { db.collection(\"Forms\").doc(currentquestion).update({\r\n                //         answersstats:[Number(x0),Number(x1+1),Number(x2),Number(x3),Number(x4)],\r\n                //     },{ merge: true });}\r\n                //     if(place===2)\r\n                //     {db.collection(\"Forms\").doc(currentquestion).update({\r\n                //         answersstats:[Number(x0),Number(x1),Number(x2+1),Number(x3),Number(x4)],\r\n                //     },{ merge: true });}\r\n                //     if(place===3)\r\n                //    { db.collection(\"Forms\").doc(currentquestion).update({\r\n                //         answersstats:[Number(x0),Number(x1),Number(x2),Number(x3+1),Number(x4)],\r\n                //     },{ merge: true });}\r\n                //     if(place===4)\r\n                //    { db.collection(\"Forms\").doc(currentquestion).update({\r\n                //         answersstats:[Number(x0),Number(x1),Number(x2),Number(x3),Number(x4+1)],\r\n                //     },{ merge: true });}\r\n                        \r\n                    // //to make sure we dont go over same answer twcie\r\n                    // k.checked=false;\r\n                    // console.log(element.data());\r\n                    }\r\n\r\n\r\n                   }\r\n            \r\n                    //put it back in firestore\r\n                }\r\n\r\n            });\r\n        \r\n        });\r\n        \r\n\r\n    }\r\n\r\ncreateData(q,a,num,i)\r\n{\r\n    var data={\r\n        quest:q,\r\n        answers:a,\r\n        numQuest:num,\r\n        answerstats:[0,0,0,0,0]\r\n    }\r\n    // quest = \"\"\r\n    // answers=\"abc$$efg\"\r\n    // numQuest = 5 //number of question\r\n    //answerstats=[0,0,0,0,0]\r\n    //questionNumber=parseint(id)\r\n    // element.id\r\n\r\n    this.createDocElement(data,i)\r\n}\r\n\r\ncreateDocElement(data,id)\r\n{\r\n    let textarray=Array(100);\r\n       \r\n        let test = data\r\n        let tr = document.createElement('tr')\r\n        let tdQuest = document.createElement('td')\r\n        tdQuest.classList.add(\"pQ\");\r\n        tdQuest.id=parseInt(id);\r\n\r\n      \r\n\r\n        tdQuest.textContent = test.quest\r\n        tr.appendChild(tdQuest)\r\n        // console.log(tdQuest);\r\n        let tdAns = document.createElement(\"td\")\r\n        let arrAns\r\n        if(test.answers){\r\n        arrAns = test.answers.split(\"$$\");\r\n        }\r\n        for(let i = 0; i<test.numQuest ; i++){\r\n\r\n            var x = document.createElement(\"INPUT\");\r\n            x.setAttribute(\"type\", \"radio\");\r\n            x.setAttribute(\"onChange\",\"{this.test1()}\");\r\n            x.setAttribute(\"id\", arrAns[i])\r\n            x.setAttribute(\"name\",test.quest)\r\n            //x.setAttribute(\"name\",\"question number:\"+test.numQuest)\r\n            x.setAttribute(\"value\",i+1)\r\n            \r\n            var y = document.createElement(\"LABEL\");\r\n            var t = document.createTextNode(arrAns[i]);\r\n            y.setAttribute(\"htmlFor\", arrAns[i]);\r\n            y.appendChild(t);\r\n            tdAns.appendChild(x)\r\n            tdAns.appendChild(y)\r\n            \r\n        }\r\n        tr.appendChild(tdAns) \r\n        \r\n        textarray[parseInt(tdQuest.id)]=tr;\r\n        \r\n        \r\n}\r\n\r\n\r\n//____________________render happens after commponent did mount in order to load the page_____________________    \r\n    render(){\r\n      \r\n //_____________________________the following code gets the questions from the db,\r\n //_____________________________builds an html tr for that question,\r\n //_____________________________check based on the secs where that question needs to go in the page and sends \r\n        let textarray=Array(100);\r\n            db.collection('Forms').get().then((ans) => {\r\n            ans.forEach(element => {\r\n                if(element.exists)\r\n                {\r\n                    this.createDocElement(element.data(),element.id)\r\n                    // let test = element.data()\r\n                    // let tr = document.createElement('tr')\r\n                    // let tdQuest = document.createElement('td')\r\n                    // tdQuest.classList.add(\"pQ\");\r\n                    // tdQuest.id=parseInt(element.id);\r\n\r\n                  \r\n\r\n                    // tdQuest.textContent = test.quest\r\n                    // tr.appendChild(tdQuest)\r\n                    // // console.log(tdQuest);\r\n                    // let tdAns = document.createElement(\"td\")\r\n                    // let arrAns\r\n                    // if(test.answers){\r\n                    // arrAns = test.answers.split(\"$$\");\r\n                    // }\r\n                    // for(let i = 0; i<test.numQuest ; i++){\r\n\r\n                    //     var x = document.createElement(\"INPUT\");\r\n                    //     x.setAttribute(\"type\", \"radio\");\r\n                    //     x.setAttribute(\"onChange\",\"{this.test1()}\");\r\n                    //     x.setAttribute(\"id\", arrAns[i])\r\n                    //     x.setAttribute(\"name\",test.quest)\r\n                    //     //x.setAttribute(\"name\",\"question number:\"+test.numQuest)\r\n                    //     x.setAttribute(\"value\",i+1)\r\n                        \r\n                    //     var y = document.createElement(\"LABEL\");\r\n                    //     var t = document.createTextNode(arrAns[i]);\r\n                    //     y.setAttribute(\"htmlFor\", arrAns[i]);\r\n                    //     y.appendChild(t);\r\n                    //     tdAns.appendChild(x)\r\n                    //     tdAns.appendChild(y)\r\n                        \r\n                    // }\r\n                    // tr.appendChild(tdAns) \r\n                    \r\n                    // textarray[parseInt(tdQuest.id)]=tr;\r\n                    }\r\n                    \r\n                }\r\n            );\r\n            if(this.state.secs1 && this.state.secs2 && this.state.secs3)\r\n                    {\r\n                        // console.log(this.state.secs1.length);\r\n                        for(let i=this.state.secs1.length;i>0;i--)\r\n                        {\r\n                            document.getElementById(\"שייכות\").after(textarray[i]);       \r\n                        }\r\n                        // console.log(this.state.secs2.length+this.state.secs1.length);\r\n                        for(let j=(this.state.secs2.length+this.state.secs1.length);j>this.state.secs1.length;j--)\r\n                        {\r\n                            document.getElementById(\"יאוש\").after(textarray[j]);       \r\n                        }\r\n                        // console.log(this.state.secs3.length+this.state.secs2.length+this.state.secs1.length);\r\n                        for(let m=(this.state.secs3.length+this.state.secs2.length+this.state.secs1.length);m>(this.state.secs2.length+this.state.secs1.length);m--)\r\n                        {\r\n                            document.getElementById(\"בדידות\").after(textarray[m]);       \r\n                        }\r\n                       \r\n                    }\r\n          });\r\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//______________________________this codes get the users from firestore db and creates an email to send to admins\r\n            // db.collection('users').get().then((ans) => {\r\n            //     ans.forEach(element => {\r\n            //         if(element){\r\n            //             let subjectslist=\"mailto:\";\r\n                        \r\n            //             if(element.data())\r\n            //             {\r\n            //                 // console.log(element.data());\r\n            //                 // console.log(element.data().admins);\r\n            //                 element.data().admins.forEach(e=>{\r\n            //                 subjectslist+=e;\r\n            //                 subjectslist+=\";\"\r\n            //                 })\r\n                \r\n            //                 subjectslist+=\"?subject=מענה לשאלות משה\"\r\n            //             document.getElementById(\"main_form\").action=subjectslist;\r\n                       \r\n                          \r\n                    \r\n            //             }\r\n            //         }\r\n            //     });\r\n            // }\r\n            // );\r\n   \r\n            \r\n   \r\n//______________this page is loaded after header and it hiererchy is this header,form[tables],footer[admin zone],about\r\n   \r\n            return (\r\n        \r\n        \r\n        <div id=\"F1\" dir=\"rtl\">\r\n        <Card style={{\"padding\": \"1.5%\", \"borderColor\":\"#66CDAA\"}}>\r\n        <h1 style={{\"textAlign\":\"center\"}}>שאלון מש\"ה</h1>\r\n\r\n        {/* <form method=\"method\" action=\"mailto:a@b.c\" encType=\"text/plain\">\r\n<input type=\"text\" name=\"subject\" value=\"d e\"/>\r\n<input type=\"text\" name=\"body\" value=\"אהבסבהבה\"/>\r\n        <button type=\"submit\">k</button>\r\n        </form> */}\r\n            {/* <form id=\"main_form\" encType=\"text/plain\">  */}\r\n            \r\n            \r\n            {/* <form id=\"main_form\" method=\"method\" action=\"mailto:avni@gmail.com\" encType=\"text/plain\">  */}\r\n            {/* <input type=\"text\" name=\"subject\" defaultValue=\"תשובות לשאלון משה\"/>\r\n            <input id=\"form_body\" type=\"text\" name=\"body\" defaultValue=\"אהבסבהבה\"/> */}\r\n\r\n\r\n\r\n            <h4 style={{\"textAlign\":\"center\"}}>במקרים בהם יש סקאלה: 1-5, כאשר 1 מייצג מצב טוב ו-5 מייצג מצב גרוע</h4>\r\n            \r\n            \r\n            \r\n            <table id=\"addQuestion\">\r\n            <tbody id=\"שייכות\" className=\"pre_titles\"><tr><td>שייכות:</td></tr></tbody>\r\n            <tbody id=\"יאוש\"className=\"pre_titles\"><tr><td>יאוש/תקווה:</td></tr></tbody>\r\n            <tbody id=\"בדידות\"className=\"pre_titles\"><tr><td>בדידות/ניכור:</td></tr></tbody>\r\n            </table>\r\n            {/* <hr width=\"300%\"/> */}\r\n            {/* <br/> */}\r\n\r\n\r\n            {/* <br/> */}\r\n            <button className=\"btn btn-primary\"  onClick={()=>{this.handleSubmit ()}} style = {{\"marginRight\": \"45%\"}}>שלח</button>\r\n            {/* </form> */}\r\n            </Card>\r\n\r\n           \r\n            \r\n    </div>\r\n    \r\n    )\r\n    }\r\n}\r\n\r\nexport default FormHook\r\n\r\n"]},"metadata":{},"sourceType":"module"}